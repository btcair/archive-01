# Objects: K8s Secret

## 1. ê°œìš” ë° ë¹„ìœ 
**Secret(ì‹œí¬ë¦¿)**ì€ ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸, OAuth í† í°, SSH í‚¤ì™€ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤ë¸Œì íŠ¸ì…ë‹ˆë‹¤. 

ğŸ’¡ **ë¹„ìœ í•˜ìë©´ 'ì‚¬ë¬´ì‹¤ì˜ ì ê¸ˆì¥ì¹˜ê°€ ìˆëŠ” ê¸ˆê³ 'ì™€ ê°™ìŠµë‹ˆë‹¤.**
ë¹„ë°€ë²ˆí˜¸ë‚˜ ì¸ì¦ì„œ ê°™ì€ ì¤‘ìš”í•œ ì •ë³´ë¥¼ íŒŒë“œì˜ ì†ŒìŠ¤ ì½”ë“œë‚˜ ConfigMap(ê²Œì‹œíŒ)ì— í¬ìŠ¤íŠ¸ì‡ì²˜ëŸ¼ ë¶™ì—¬ë‘ë©´ ë³´ì•ˆ ì‚¬ê³ ê°€ ë°œìƒí•©ë‹ˆë‹¤. ëŒ€ì‹  ì´ ì •ë³´ë“¤ì„ Secret(ê¸ˆê³ )ì— ë„£ì–´ë‘ê³ , ê¶Œí•œì´ ìˆëŠ” íŒŒë“œë§Œ ê¸ˆê³ ë¥¼ ì—´ì–´ ë¹„ë°€ë²ˆí˜¸ë¥¼ êº¼ë‚´ ì“¸ ìˆ˜ ìˆë„ë¡ ê²©ë¦¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

## 2. í•µì‹¬ ì„¤ëª…
* **ë³´ì•ˆ ë©”ì»¤ë‹ˆì¦˜:** íŒŒë“œì— Secretì„ ë³¼ë¥¨ìœ¼ë¡œ ë§ˆìš´íŠ¸í•  ë•Œ, ë¬¼ë¦¬ì ì¸ ë””ìŠ¤í¬ê°€ ì•„ë‹ˆë¼ **ë©”ëª¨ë¦¬(tmpfs)**ì— íŒŒì¼ í˜•íƒœë¡œ ì €ì¥ë©ë‹ˆë‹¤. íŒŒë“œê°€ ì‚­ì œë˜ë©´ ë©”ëª¨ë¦¬ì—ì„œë„ ì¦‰ì‹œ ë‚ ì•„ê°€ë¯€ë¡œ ë³´ì•ˆì„±ì´ ë†’ìŠµë‹ˆë‹¤.
* **ì¸ì½”ë”© vs ì•”í˜¸í™” ì£¼ì˜:** Secret íŒŒì¼(YAML)ì— ì íŒ ê°’ì€ ì•”í˜¸í™”(Encryption)ëœ ê²ƒì´ ì•„ë‹ˆë¼ ë‹¨ìˆœíˆ **Base64ë¡œ ì¸ì½”ë”©(Encoding)**ëœ ê²ƒì…ë‹ˆë‹¤. ëˆ„êµ¬ë‚˜ ë””ì½”ë”©í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, Git ì €ì¥ì†Œì— Secret YAML íŒŒì¼ì„ ê·¸ëŒ€ë¡œ ì˜¬ë¦¬ë©´ ì ˆëŒ€ ì•ˆ ë©ë‹ˆë‹¤!
* **ì¢…ë¥˜:** ì‚¬ìš©ì ì •ì˜ ë°ì´í„°ë¥¼ ë„£ëŠ” `Opaque`, TLS ì¸ì¦ì„œë¥¼ ë„£ëŠ” `kubernetes.io/tls`, í”„ë¼ì´ë¹— ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë¡œê·¸ì¸ ì •ë³´ë¥¼ ë„£ëŠ” `kubernetes.io/dockerconfigjson` ë“±ì´ ìˆìŠµë‹ˆë‹¤.

## 3. YAML ì ìš© ì˜ˆì‹œ (Opaque Secret ìƒì„± ë° ì£¼ì…)
ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ë¥¼ Secretìœ¼ë¡œ ë§Œë“¤ê³ , íŒŒë“œì˜ í™˜ê²½ë³€ìˆ˜ë¡œ ì£¼ì…í•˜ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.

```yaml
# 1. Secret ìƒì„± (ê°’ì€ ë¯¸ë¦¬ Base64ë¡œ ë³€í™˜ë˜ì–´ì•¼ í•¨)
# ì˜ˆ: echo -n "supersecret" | base64 -> c3VwZXJzZWNyZXQ=
apiVersion: v1
kind: Secret
metadata:
  name: db-credentials
type: Opaque
data:
  db-password: c3VwZXJzZWNyZXQ= # Base64 ì¸ì½”ë”©ëœ ê°’

---
# 2. íŒŒë“œì—ì„œ Secret ì°¸ì¡°
apiVersion: v1
kind: Pod
metadata:
  name: db-client-pod
spec:
  containers:
  - name: app
    image: my-app:latest
    env:
    - name: DB_PASS
      valueFrom:
        secretKeyRef:
          name: db-credentials
          key: db-password # Secretì˜ 'db-password' í‚¤ ê°’ì„ í™˜ê²½ë³€ìˆ˜ DB_PASSì— ì£¼ì…
```

## 4. íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
* **ì•±ì—ì„œ ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜(Auth ì—ëŸ¬)ê°€ ë°œìƒí•  ë•Œ:**
  * ì£¼ë‹ˆì–´ ì—”ì§€ë‹ˆì–´ë“¤ì´ ë¦¬ëˆ…ìŠ¤ì—ì„œ Base64 ê°’ì„ ë§Œë“¤ ë•Œ ê°€ì¥ ë§ì´ í•˜ëŠ” ì‹¤ìˆ˜ì…ë‹ˆë‹¤. í„°ë¯¸ë„ì—ì„œ `echo "password" | base64` ë¼ê³  ì¹˜ë©´ **ë³´ì´ì§€ ì•ŠëŠ” ì¤„ë°”ê¿ˆ ë¬¸ì(\n)**ê¹Œì§€ ê°™ì´ ì¸ì½”ë”©ë©ë‹ˆë‹¤.
  * í•´ê²°ì±…: ë°˜ë“œì‹œ `echo -n "password" | base64` ì²˜ëŸ¼ `-n` ì˜µì…˜ì„ ì£¼ì–´ ìˆœìˆ˜í•œ ë¬¸ìì—´ë§Œ ì¸ì½”ë”©í•´ì•¼ í•©ë‹ˆë‹¤.