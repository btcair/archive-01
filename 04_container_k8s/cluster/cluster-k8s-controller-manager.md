# Cluster: K8s Controller Manager

## 1. κ°μ” λ° λΉ„μ 
**Controller Manager**λ” ν΄λ¬μ¤ν„° λ‚΄μ λ‹¤μ–‘ν• 'μƒνƒ κ°μ‹ λ΅λ΄‡'λ“¤μ„ κ΄€λ¦¬ν•λ” λ€μ¥μ…λ‹λ‹¤. κ°κ°μ μ»¨νΈλ΅¤λ¬λ” νΉμ • μμ›μ„ κ°μ‹ν•λ©° λ°”λΌλ” μƒνƒλ¥Ό μ μ§€ν•λ ¤κ³  λ…Έλ ¥ν•©λ‹λ‹¤.

π’΅ **λΉ„μ ν•μλ©΄ 'μ•„ννΈ κ΄€λ¦¬μ†μ λ¬΄μΈ κ°μ‹ μ‹μ¤ν…'κ³Ό κ°™μµλ‹λ‹¤.**
* **λ³µμ  μ»¨νΈλ΅¤λ¬:** "κ° μΈµμ— μ†ν™”κΈ°κ°€ 3κ°μ”© μλ”μ§€ ν™•μΈν•κ³  λ¶€μ΅±ν•λ©΄ μ±„μ›λ„£μ–΄."
* **λ…Έλ“ μ»¨νΈλ΅¤λ¬:** "κ²½λΉ„μ›(Node)μ΄ μ‘λ‹µμ΄ μ—†μΌλ©΄ μ‚¬ν‡΄ μ²λ¦¬ν•κ³  λ³΄κ³ ν•΄."
* **μ—”λ“ν¬μΈνΈ μ»¨νΈλ΅¤λ¬:** "μ‹λ‹Ή λ©”λ‰΄κ°€ λ°”λ€λ©΄ μ•λ‚΄ν(Service/Endpoint)μ„ μ¦‰μ‹ μμ •ν•΄."

## 2. ν•µμ‹¬ μ„¤λ…
* **μ§€μ†μ μΈ λ£¨ν”„:** "ν„μ¬ μƒνƒ ν™•μΈ $\rightarrow$ μ°¨μ΄μ  λ°κ²¬ $\rightarrow$ μμ • μ‘μ—… μν–‰"μ΄λΌλ” λ¬΄ν• λ£¨ν”„λ¥Ό λλ©° ν΄λ¬μ¤ν„°λ¥Ό μ•μ •ν™”ν•©λ‹λ‹¤.
* **ν•λ‚μ ν”„λ΅μ„Έμ¤:** λ…Όλ¦¬μ μΌλ΅λ” μ—¬λ¬ μ»¨νΈλ΅¤λ¬(Node, Job, Endpoint λ“±)κ°€ μ΅΄μ¬ν•μ§€λ§, λ³µμ΅μ„±μ„ μ¤„μ΄κΈ° μ„ν•΄ `kube-controller-manager`λΌλ” ν•λ‚μ μ‹¤ν–‰ νμΌλ΅ λ¬¶μ—¬μ„ λμ•„κ°‘λ‹λ‹¤.

## 3. YAML μ μ© μμ‹ (Controller Manager μ‹¤ν–‰ μµμ…)
λ…Έλ“ μ¥μ• λ¥Ό μ–Όλ§λ‚ λΉ¨λ¦¬ κ°μ§€ν• μ§€ κ²°μ •ν•λ” μ„¤μ • μμ‹μ…λ‹λ‹¤.

```yaml
# kube-controller-manager μ‹¤ν–‰ νλΌλ―Έν„° μ¤‘ μΌλ¶€
- --node-monitor-grace-period=40s    # 40μ΄ λ™μ• μ‘λ‹µ μ—†μΌλ©΄ λΉ„μ •μƒ μμ‹¬
- --node-monitor-period=5s          # 5μ΄λ§λ‹¤ λ…Έλ“ μƒνƒ μ²΄ν¬
- --pod-eviction-timeout=5m0s       # λ…Έλ“ λ‹¤μ΄ μ‹ 5λ¶„ ν›„ νλ“λ¥Ό λ‹¤λ¥Έ κ³³μΌλ΅ μ΄μ‚¬μ‹ν‚΄
```

## 4. νΈλ¬λΈ” μν…
* **νλ“κ°€ λ‹¤λ¥Έ λ…Έλ“λ΅ λ°”λ΅ μ΄μ‚¬ κ°€μ§€ μ•λ” κ²½μ°:**
  * λ…Έλ“κ°€ μ£½μ—μ„ λ• μ¦‰μ‹ νλ“κ°€ μ‚΄μ•„λ‚μ§€ μ•λ”λ‹¤λ©΄ `pod-eviction-timeout` μ„¤μ •μ„ ν™•μΈν•μ„Έμ”. κΈ°λ³Έκ°’μ΄ 5λ¶„μ΄λΌ μ„±κ²© κΈ‰ν• ν•κµ­ μ—”μ§€λ‹μ–΄λ“¤μ—κ²λ” μ¥μ• μ²λΌ λκ»΄μ§ μ μμµλ‹λ‹¤.