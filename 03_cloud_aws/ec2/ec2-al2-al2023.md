# Amazon Linux 2 vs Amazon Linux 2023

## 1. 개요
AWS의 자체 제공 운영체제인 **Amazon Linux 2 (AL2)**와 최신 버전인 **Amazon Linux 2023 (AL2023)**의 주요 아키텍처 차이점 및 마이그레이션 시 고려사항입니다.

## 2. 설명
* **베이스 OS 변경:** AL2는 CentOS 7 및 RHEL 7과 유사한 구조를 가졌으나, AL2023은 **Fedora** 프로젝트를 기반으로 설계되었습니다.
* **패키지 매니저 변경:** 기존의 `yum`을 대체하여, 성능이 향상된 **`dnf`** 패키지 매니저를 기본으로 사용합니다. (단, AL2023에서도 호환성을 위해 `yum` 명령어 사용은 가능합니다.)
* **결정론적 업데이트 (Deterministic Updates):** AL2023은 리포지토리가 특정 버전의 패키지에 고정(Lock)됩니다. 패키지 버전 충돌을 방지하며, 필요시 최신 AMI 릴리스로 잠금을 명시적으로 업데이트해야 합니다.
* **보안 강화:** 기본적으로 **SELinux**가 Permissive 모드로 포함되어 있으며, SSH 데몬 설정에서 구형 RSA 키(SHA-1) 사용이 기본 차단됩니다.

## 3. 참조 및 관련된 파일
* [[ec2-ami]]
* [[ec2-os-migration]]
* [[eks-nodeadm]] (EKS 노드 OS로 AL2023 사용 시 연관)

## 4. 트러블 슈팅
* **EPEL 저장소 사용 불가:**
  * AL2에서 널리 쓰이던 `epel-release`(Extra Packages for Enterprise Linux)는 AL2023에서 **지원하지 않습니다**. EPEL에 의존하던 서드파티 패키지가 있다면 소스 컴파일을 하거나 대체 패키지를 찾아야 합니다.
* **기존 User Data 스크립트 오류:**
  * 인스턴스 초기화 시 사용하는 `amazon-linux-extras` 명령어(AL2 전용)가 AL2023에서는 작동하지 않습니다. 관련된 스크립트를 `dnf install` 방식으로 재작성해야 합니다.
* **SSH 접속 거부 (구형 키 사용):**
  * `ssh-rsa` (SHA-1) 기반의 오래된 SSH 클라이언트로 접속을 시도하면 거부당합니다. 클라이언트를 업그레이드하거나 `ecdsa` 또는 `ed25519` 키를 새로 생성하여 접속해야 합니다.

## 5. 참고자료 또는 링크
* [AWS 공식 문서 - Amazon Linux 2023과 Amazon Linux 2 비교](https://docs.aws.amazon.com/linux/al2023/ug/compare-with-al2.html)


- [참고] al2와 al2023의 비교
https://docs.aws.amazon.com/ko_kr/linux/al2023/ug/compare-with-al2.html