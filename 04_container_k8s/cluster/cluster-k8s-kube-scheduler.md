# Cluster: K8s Scheduler

## 1. κ°μ” λ° λΉ„μ 
**Scheduler**λ” μƒλ΅ μƒμ„±λ νλ“λ¥Ό μ–΄λ–¤ λ…Έλ“μ— λ°°μΉν• μ§€ κ²°μ •ν•λ” 'λ°°μ • λ‹΄λ‹Ήμ'μ…λ‹λ‹¤. 

π’΅ **λΉ„μ ν•μλ©΄ 'λ€ν•™κµ μκ°•μ‹ μ²­ μ‹μ¤ν… λλ” κΈ°μ™μ‚¬ λ°°μ • λ‹΄λ‹Ήμ'μ™€ κ°™μµλ‹λ‹¤.**
ν•™μƒ(Pod)μ΄ λ“¤μ–΄μ¤λ©΄, κ° κ±΄λ¬Ό(Node)μ λΉμλ¦¬ ν„ν™©, ν•™μƒμ μ „κ³µ(ν•„μ” μμ›), μ„ νΈν•λ” λ°© μΉκµ¬(Affinity) λ“±μ„ κ³ λ ¤ν•΄μ„ μµμ μ λ°©μ— λ°°μ •ν•΄ μ¤λ‹λ‹¤. "μ΄ ν•™μƒμ€ ν μ²΄μ–΄λ¥Ό νƒ€λ‹κΉ μ—λ¦¬λ² μ΄ν„°κ°€ μλ” κ±΄λ¬Ό(GPU λ…Έλ“ λ“±)μ— λ°°μΉν•΄μ•Ό ν•΄" κ°™μ€ λ³µμ΅ν• μ΅°κ±΄λ„ μ²λ¦¬ν•©λ‹λ‹¤.



## 2. ν•µμ‹¬ μ„¤λ…
* **2λ‹¨κ³„ κ²°μ • κ³Όμ •:** 1. **Filtering:** νλ“κ°€ μ”κµ¬ν•λ” μμ›(CPU/MEM)κ³Ό μ΅°κ±΄(Selector)μ„ λ§μ΅±ν•μ§€ λ»ν•λ” λ…Έλ“λ¥Ό ν›„λ³΄μ—μ„ μ μ™Έν•©λ‹λ‹¤.
  2. **Scoring:** λ‚¨μ€ ν›„λ³΄ λ…Έλ“ μ¤‘ κ°€μ¥ μ μκ°€ λ†’μ€(μμ›μ΄ λ„‰λ„‰ν•κ±°λ‚ λ„¤νΈμ›ν¬κ°€ κ°€κΉμ΄ λ“±) λ…Έλ“λ¥Ό μµμΆ… μ„ νƒν•©λ‹λ‹¤.
* **μ¤μ§ λ°°μΉ κ²°μ •λ§:** μ¤μΌ€μ¤„λ¬λ” "μ–΄λ””μ— λ‘μ§€"λ§ κ²°μ •ν•  λΏ, μ‹¤μ λ΅ νλ“λ¥Ό λ„μ°λ” κ±΄ Kubeletμ λ«μ…λ‹λ‹¤.

## 3. YAML μ μ© μμ‹ (Node Affinity μ„¤μ •)
μ¤μΌ€μ¤„λ¬μ—κ² νΉμ • λΌλ²¨μ΄ λ¶™μ€ λ…Έλ“μ—λ§ νλ“λ¥Ό λ°°μΉν•λ„λ΅ μ§€μ‹ν•λ” μ„¤μ •μ…λ‹λ‹¤.

```yaml
spec:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: disktype
            operator: In
            values:
            - ssd # disktype=ssd λΌλ²¨μ΄ μλ” λ…Έλ“μ—λ§ λ°°μΉν•΄λΌ!
```

## 4. νΈλ¬λΈ” μν…
* **νλ“κ°€ κ³„μ† `Pending` μƒνƒμΈ κ²½μ°:**
  * `kubectl describe pod` λ…λ Ήμ–΄λ¥Ό μ³¤μ„ λ• `0/3 nodes are available: 3 Insufficient cpu` κ°™μ€ λ©”μ‹μ§€κ°€ μλ‹¤λ©΄ μ¤μΌ€μ¤„λ¬κ°€ νλ“λ¥Ό λ³΄λ‚Ό λΉμλ¦¬λ¥Ό μ°Ύμ§€ λ»ν• κ²ƒμ…λ‹λ‹¤. λ…Έλ“λ¥Ό μ¶”κ°€ν•κ±°λ‚ νλ“μ μ”κµ¬ μμ›μ„ μ¤„μ—¬μ•Ό ν•©λ‹λ‹¤.